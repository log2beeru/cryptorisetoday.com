<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta 
  name="viewport" 
  content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"
/>
<title>Private Chat</title>

<!-- Firebase -->
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-database-compat.js"></script>

<style>
*{box-sizing:border-box}
body{
  margin:0;
  font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Arial;
  background:#0b141a;
  color:#fff;
}

/* LOGIN */
#login{
  min-height:100vh;
  display:flex;
  align-items:center;
  justify-content:center;
}
.login-box{
  width:90%;
  max-width:360px;
  padding:20px;
  background:#202c33;
  border-radius:12px;
}
.login-box h3{text-align:center;margin-bottom:15px}
.login-box input,
.login-box button{
  width:100%;
  padding:12px;
  font-size:16px;
  border:none;
  border-radius:8px;
}
.login-box input{margin-bottom:12px}
.login-box button{background:#00a884;color:#000}

/* CHAT */
#chat{display:none;height:100vh}
.header{
  height:56px;
  background:#202c33;
  display:flex;
  align-items:center;
  justify-content:center;
  font-weight:bold;
}
.messages{
  height:calc(100vh - 112px);
  padding:10px;
  overflow-y:auto;
  -webkit-overflow-scrolling:touch;
}
.bubble{
  max-width:75%;
  padding:10px 14px;
  margin:6px 0;
  border-radius:12px;
  font-size:15px;
  word-wrap:break-word;
}
.me{
  background:#005c4b;
  margin-left:auto;
}
.other{
  background:#202c33;
  margin-right:auto;
}

/* INPUT BAR */
.footer{
  height:56px;
  display:flex;
  padding:6px;
  background:#202c33;
}
.footer input{
  flex:1;
  padding:10px 14px;
  font-size:16px;
  border:none;
  border-radius:20px;
}
.footer button{
  width:44px;
  height:44px;
  margin-left:6px;
  border:none;
  border-radius:50%;
  background:#00a884;
  font-size:18px;
}
input:focus{outline:none}
</style>
</head>

<body>

<!-- LOGIN -->
<div id="login">
  <div class="login-box">
    <h3>Private Chat</h3>
    <input id="pass" type="password" placeholder="Enter Password">
    <button onclick="join()">Enter</button>
  </div>
</div>

<!-- CHAT -->
<div id="chat">
  <div class="header">Private Chat</div>
  <div class="messages" id="messages"></div>
  <div class="footer">
    <input id="msg" placeholder="Type a message">
    <button onclick="send()">âž¤</button>
  </div>
</div>

<script>
/* ðŸ”§ FIREBASE CONFIG */
const firebaseConfig = {
  apiKey: "YOUR_API_KEY",
  authDomain: "YOUR_PROJECT.firebaseapp.com",
  databaseURL: "https://YOUR_PROJECT-default-rtdb.firebaseio.com",
  projectId: "YOUR_PROJECT"
};
firebase.initializeApp(firebaseConfig);
const db = firebase.database();

/* ðŸ” SETTINGS */
const CORRECT_PASS = "12345";
const ROOM = "private_chat_room";

/* ðŸ‘¤ AUTO USER ID */
const userId = "user_" + Math.floor(Math.random() * 1000000);
const roomRef = db.ref("rooms/" + ROOM);

/* JOIN */
function join(){
  if(pass.value !== CORRECT_PASS){
    alert("Wrong password");
    return;
  }
  document.getElementById("login").style.display="none";
  document.getElementById("chat").style.display="block";

  roomRef.child("messages")
    .limitToLast(100)
    .on("child_added", snap=>{
      const m = snap.val();
      if(!m) return;

      const d = document.createElement("div");
      d.className = "bubble " + (m.user === userId ? "me" : "other");
      d.textContent = m.text;

      messages.appendChild(d);
      messages.scrollTop = messages.scrollHeight;
    });
}

/* SEND */
function send(){
  const text = msg.value.trim();
  if(!text) return;

  roomRef.child("messages").push({
    user: userId,
    text: text,
    time: Date.now()
  });

  msg.value = "";
}

/* iOS ENTER KEY FIX */
msg.addEventListener("keydown", e=>{
  if(e.key === "Enter"){
    e.preventDefault();
    send();
  }
});
</script>

</body>
</html>
