<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Private Chat</title>

<!-- Firebase -->
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-database-compat.js"></script>

<style>
body{margin:0;font-family:Arial;background:#0b141a;color:#fff}
#login{max-width:360px;margin:80px auto;padding:20px;background:#202c33;border-radius:10px}
#chat{display:none;height:100vh}
.header{background:#202c33;padding:12px;text-align:center;font-weight:bold}
.messages{height:calc(100vh - 120px);overflow-y:auto;padding:10px}
.bubble{max-width:70%;padding:8px 12px;margin:6px;border-radius:8px}
.me{background:#005c4b;margin-left:auto}
.other{background:#202c33}
.footer{display:flex;padding:10px;background:#202c33}
.footer input{flex:1;padding:10px;border:none;border-radius:20px}
.footer button{margin-left:8px;border:none;padding:10px 14px;border-radius:50%;background:#00a884}
input,button{outline:none}
</style>
</head>

<body>

<!-- LOGIN -->
<div id="login">
  <h3>Enter Password</h3>
  <input id="pass" type="password" placeholder="Password" style="width:100%;padding:8px"><br><br>
  <button onclick="join()" style="width:100%;padding:10px;background:#00a884;border:none">
    Enter Chat
  </button>
</div>

<!-- CHAT -->
<div id="chat">
  <div class="header">Private Chat</div>
  <div class="messages" id="messages"></div>
  <div class="footer">
    <input id="msg" placeholder="Type a message">
    <button onclick="send()">âž¤</button>
  </div>
</div>

<script>
/* ðŸ”§ REPLACE WITH YOUR FIREBASE DETAILS */
const firebaseConfig = {
  apiKey: "YOUR_API_KEY",
  authDomain: "YOUR_PROJECT.firebaseapp.com",
  databaseURL: "https://YOUR_PROJECT-default-rtdb.firebaseio.com",
  projectId: "YOUR_PROJECT"
};
firebase.initializeApp(firebaseConfig);
const db = firebase.database();

/* ðŸ” SETTINGS */
const ROOM = "private_chat_room";
const CORRECT_PASS = "12345";

/* ðŸ‘¤ AUTO USER ID */
const user = "user_" + Math.floor(Math.random() * 100000);
const roomRef = db.ref("rooms/" + ROOM);

function join(){
  if(pass.value !== CORRECT_PASS){
    alert("Wrong password");
    return;
  }

  login.style.display = "none";
  chat.style.display = "block";

  roomRef.child("messages")
    .limitToLast(50)
    .on("child_added", s => {
      const m = s.val();
      const d = document.createElement("div");
      d.className = "bubble " + (m.user === user ? "me" : "other");
      d.innerText = m.text;
      messages.appendChild(d);
      messages.scrollTop = messages.scrollHeight;
    });
}

function send(){
  if(!msg.value.trim()) return;

  roomRef.child("messages").push({
    user: user,
    text: msg.value,
    time: Date.now()
  });

  msg.value = "";
}
</script>

</body>
</html>
